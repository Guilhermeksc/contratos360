<!-- Layout para Mobile/Tablet: Menu no Topo -->
<div *ngIf="showTopMenu()" class="mobile-layout">
  <!-- Header com botão de toggle -->
  <header class="top-header">
    <button 
      mat-icon-button 
      class="menu-toggle-button"
      (click)="toggleTopMenu()"
      [attr.aria-expanded]="isTopMenuExpanded()"
      aria-label="Toggle menu">
      <mat-icon>{{ isTopMenuExpanded() ? 'close' : 'menu' }}</mat-icon>
    </button>
    <div class="top-header-title clickable" (click)="navigateHome()" tabindex="0" role="link" aria-label="Ir para Home">
      <img 
        src="/assets/img/svg/brazil.png" 
        alt="Bandeira do Brasil" 
        class="brazil-flag-mobile"
        aria-hidden="true">
      <span class="title">CEMOS</span>
      <span class="subtitle">2028</span>
    </div>
    <button 
      mat-flat-button 
      class="logout-button"
      (click)="logout()"
      aria-label="Fazer logout">
      <mat-icon>logout</mat-icon>
      <span>Sair</span>
    </button>
  </header>

  <!-- Overlay quando menu está expandido -->
  <div 
    *ngIf="isTopMenuExpanded()"
    class="menu-overlay"
    (click)="closeTopMenu()"
    [@topMenuCollapse]="'expanded'">
  </div>

  <!-- Menu expansível -->
  <div 
    class="top-menu-container"
    [@topMenuCollapse]="isTopMenuExpanded() ? 'expanded' : 'collapsed'">
    <app-side-menu 
      [isTopMenuMode]="true"
      (itemClicked)="closeTopMenu()">
    </app-side-menu>
  </div>

  <!-- Conteúdo principal -->
  <main class="mobile-content" [class.menu-expanded]="isTopMenuExpanded()">
    <router-outlet></router-outlet>
  </main>
</div>

<!-- Layout para Desktop: Menu Lateral -->
<mat-sidenav-container *ngIf="showSideMenu()">
  <mat-sidenav
    #drawer
    mode="side"
    [opened]="true"
    fixedInViewport
  >
    <app-side-menu 
      [isTopMenuMode]="false">
    </app-side-menu>
  </mat-sidenav>

  <mat-sidenav-content>
    <section class="content-section">
      <router-outlet></router-outlet>
    </section>
  </mat-sidenav-content>
</mat-sidenav-container>
