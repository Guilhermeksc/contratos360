<div class="uasg-search-container">
  <!-- Cabeçalho e Filtros -->
  <app-page-header
    title="Controle de Contratos"
    iconPath="assets/img/svg/contratos.svg"
    [showThemeToggle]="true"
    [isDarkTheme]="isDarkTheme()"
    (themeToggle)="onThemeToggle($event)">
    
    <!-- Controles do header (filtros, etc.) -->
    <div headerControls>
      <select 
        class="uasg-select"
        [(ngModel)]="selectedUasgFilter"
        (ngModelChange)="onUasgFilterChange()">
        <option [ngValue]="null">Todas as UASGs</option>
        <option *ngFor="let uasg of uasgs()" [ngValue]="uasg.uasg_code || uasg.uasg">
          {{ uasg.uasg_code || uasg.uasg }} - {{ uasg.sigla_om || 'Sem sigla' }}
        </option>
      </select>
      
      <input 
        type="text" 
        class="uasg-input-inline search-input"
        [ngModel]="searchTerm()"
        (ngModelChange)="onSearchChange($event)"
        placeholder="Digite o texto para buscar..."
      />
    </div>
    
    <!-- Conteúdo abaixo do header (tabela, etc.) -->
    <div headerContent class="table-container">
      <app-preview-table 
        [data]="filteredPreviewData()"
        [isDarkTheme]="isDarkTheme()"
        (rowClick)="showRecordPopupHandler($event)"
      ></app-preview-table>
    </div>
  </app-page-header>

  <!-- Popup de Registros -->
  <app-record-popup
    [contratoId]="selectedContratoId()"
    [mostrar]="showRecordPopup()"
    (fechar)="closeRecordPopup()"
    (saved)="onRecordSaved()">
  </app-record-popup>
</div>

